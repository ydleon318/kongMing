<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 命名空间mapper,如果有多个mapper文件，这个必须唯一 -->
<mapper namespace="di.yang.modle.api">

    <!--添加接口业务流程测试产品数据-->
    <insert id="addApiProcessTest" parameterType="di.yang.modle.api.apiProcessTest">
        INSERT INTO api_process_test (apitestname,apitestdesc,apitester,create_time,product_id)
        VALUES (#{apitestname},#{apitestdesc},#{apitester},NOW(),#{productId})
    </insert>

    <!--添加接口业务流程测试步骤用例-->
    <insert id="addApiProcessStep" parameterType="di.yang.modle.api.apiProcessStep">
        INSERT INTO api_process_step (apiname,apiurl,apistep,apiparamvalue,apimethod,apiresult,create_time,apitest_id)
        VALUES (#{apiname},#{apiurl},#{apistep},#{apiparamvalue},#{apimethod},#{apiresult},NOW(),#{apitestId})
    </insert>

    <!--更新接口业务流程测试产品数据-->
    <update id="updataApiProcessTest" parameterType="di.yang.modle.api.apiProcessTest">
        UPDATE api_process_test
        <trim prefix="set" suffixOverrides=",">
            <if test="apitestname != null and '' !=apitestname">
                apitestname=#{apitestname},</if>
            <if test="apitestdesc != null and '' !=apitestdesc">
                apitestdesc=#{apitestdesc},</if>
            <if test="apitester != null and '' !=apitester">
                apitester=#{apitester},</if>
            <if test="product_id != null and '' !=product_id">
                product_id=#{productId},</if>
        </trim>
        WHERE id = #{id}
    </update>

    <!--更新接口业务流程测试步骤用例-->
    <update id="updataApiProcessStep" parameterType="di.yang.modle.api.apiProcessStep">
        UPDATE api_process_step
        <trim prefix="set" suffixOverrides=",">
            <if test="apiname != null and '' !=apiname">
                apiname=#{apiname},</if>
            <if test="apiurl != null and '' !=apiurl">
                apiurl=#{apiurl},</if>
            <if test="apistep != null and '' !=apistep">
                apistep=#{apistep},</if>
            <if test="apiparamvalue != null and '' !=apiparamvalue">
                apiparamvalue=#{apiparamvalue},</if>
            <if test="apimethod != null and '' !=apimethod">
                apimethod=#{apimethod},</if>
            <if test="apitest_id != null and '' !=apitest_id">
                apitest_id=#{apitestId},</if>
        </trim>
        WHERE id = #{id}
    </update>

    <!--查询接口业务流程测试产品数据-->
    <select id="getApiProcessTestInfo" parameterType="di.yang.modle.api.apiProcessTest" resultType="di.yang.modle.api.apiProcessTest">
        select * from api_process_test
        <trim prefix="WHERE" prefixOverrides="and">
            <if test="null != id and '' !=id">
                AND id=#{id}
            </if>
            <if test="null != apitestname and '' !=apitestname">
                AND apitestname=#{apitestname}
            </if>
            <if test="null != apitester and '' !=apitester">
                AND apitester=#{apitester}
            </if>
            <if test="null != apitestresult and '' !=apitestresult">
                AND apitestresult=#{apitestresult}
            </if>
            <if test="null != create_time and '' !=create_time">
                AND create_time like '%${createTime}%'
            </if>
            <if test="null != product_id and '' !=product_id">
                AND product_id=#{productId}
            </if>
        </trim>
    </select>

    <!--查询接口业务流程测试步骤用例-->
    <select id="getApiProcessStepInfo" parameterType="di.yang.modle.api.apiProcessStep" resultType="di.yang.modle.api.apiProcessStep">
        select * from api_process_step
        <trim prefix="WHERE" prefixOverrides="and">
            <if test="null != id and '' !=id">
                AND id=#{id}
            </if>
            <if test="null != apiname and '' !=apiname">
                AND apiname=#{apiname}
            </if>
            <if test="null != apiurl and '' !=apiurl">
                AND apiurl=#{apiurl}
            </if>
            <if test="null != apistep and '' !=apistep">
                AND apistep=#{apistep}
            </if>
            <if test="null != apiparamvalue and '' !=apiparamvalue">
                AND apiparamvalue=#{apiparamvalue}
            </if>
            <if test="null != apimethod and '' !=apimethod">
                AND apimethod=#{apimethod}
            </if>
            <if test="null != apiresult and '' !=apiresult">
                AND apiresult=#{apiresult}
            </if>
            <if test="null != apistatus and '' !=apistatus">
                AND apistatus=#{apistatus}
            </if>
            <if test="null != create_time and '' !=create_time">
                AND create_time like '%${createTime}%'
            </if>
            <if test="null != apitest_id and '' !=apitest_id">
                AND apitest_id=#{apitestId}
            </if>
        </trim>
    </select>

    <!--增加单一接口测试用例-->
    <insert id="addApiSingleTest" parameterType="di.yang.modle.api.apiSingleTest">
        INSERT INTO api_single_test (apiname,apiurl,apiparamvalue,apimethod,create_time,product_id)
        VALUES (#{apiname},#{apiurl},#{apiparamvalue},#{apimethod},NOW(),#{productId})
    </insert>

    <!--更新单一接口测试用例-->
    <update id="updataApiSingleTest" parameterType="di.yang.modle.api.apiSingleTest">
        UPDATE api_single_test
        <trim prefix="set" suffixOverrides=",">
            <if test="apiname != null and '' !=apiname">
                apiname=#{apiname},</if>
            <if test="apiurl != null and '' !=apiurl">
                apiurl=#{apiurl},</if>
            <if test="apiparamvalue != null and '' !=apiparamvalue">
                apiparamvalue=#{apiparamvalue},</if>
            <if test="apimethod != null and '' !=apimethod">
                apimethod=#{apimethod},</if>
            <if test="productId != null and '' !=productId">
                product_id=#{productId},</if>
        </trim>
        WHERE id = #{id}
    </update>

    <!--单一接口测试用例查询-->
    <select id="getApiSingleTestInfo" parameterType="di.yang.modle.api.apiSingleTest" resultType="di.yang.modle.api.apiSingleTest">
        select * from api_single_test
        <trim prefix="WHERE" prefixOverrides="and">
            <if test="null != id and '' !=id">
                AND id=#{id}
            </if>
            <if test="null != apiname and '' !=apiname">
                AND apiname=#{apiname}
            </if>
            <if test="null != apiurl and '' !=apiurl">
                AND apiurl=#{apiurl}
            </if>
            <if test="null != apiparamvalue and '' !=apiparamvalue">
                AND apiparamvalue=#{apiparamvalue}
            </if>
            <if test="null != apimethod and '' !=apimethod">
                AND apimethod=#{apimethod}
            </if>
            <if test="null != apiresult and '' !=apiresult">
                AND apiresult=#{apiresult}
            </if>
            <if test="null != apistatus and '' !=apistatus">
                AND apistatus=#{apistatus}
            </if>
            <if test="null != create_time and '' !=create_time">
                AND create_time like '%${createTime}%'
            </if>
            <if test="null != product_id and '' !=product_id">
                AND product_id=#{productId}
            </if>
        </trim>
    </select>

</mapper>